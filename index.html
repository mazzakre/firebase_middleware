<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>

<style>
    * {
        font-family: Arial, Helvetica, sans-serif;
    }
</style>

<h1></h1>

<script>
    const params = new URLSearchParams(window.location.search);

    if(params.get('water') && params.get('temp')){
        let water = params.get("water"); 
        let temp = params.get("temp");
        let date_value = moment().format("YYYYMMDD");
        let time_value = moment().format("HHmmss");
        let timestamp = moment().format("LLL");
        let data = {
            date: parseInt(date_value),
            meters: parseInt(water),
            temperature: parseInt(temp),
            time: time_value,
            timestamp: timestamp
        };

        $.ajax({
            url: "https://hydro-sense-3a7f1-default-rtdb.firebaseio.com/master_data.json",
            type: "POST",
            data: JSON.stringify(data),
            success: function (data) {
                $('h1').text(data.name);
            },
            error: function (xhr) {
                console.error(xhr.responseText);
            }
        });
    }
</script>
